<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="icon" type="image/x-icon" href="./icons/apple-touch-icon.png">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<title>CodeRunner</title>
</head>
<body>
	<div class="vanish">
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid vanish">
            <a class="navbar-brand" href="#">CodeRunner</a>
             <ul class="navbar-nav me-auto mb-2 mb-lg-0">
         <li class="nav-item">
          <a class="nav-link active html" id = "a" aria-current="page" href="#">Html</a>
        </li>
         <li class="nav-item">
          <a class="nav-link active css" id = "b" aria-current="page" href="#">CSS</a>
        </li>
         <li class="nav-item">
          <a class="nav-link active js " id = "c" aria-current="page" href="#">JavaScript</a>
        </li>                
             </ul>
            <button class="btn btn-dark d-flex" id = "mode">Enable dark Mode</button>
      </div>        
    </nav>
         <div class="container vanish">
        <div class="mb-3 container">
            <h1 style="user-select: auto;" class="my-3">Write your code here:</h1>
<div class="Css">
            <textarea class="form-control" id = "CSSCODE" id="exampleFormControlTextarea1" rows="20"
                id="i">
h1{
	color:red;
}
</textarea>	
</div>
<div class="Js">
	            <textarea class="form-control" id = "JSCODE" id="exampleFormControlTextarea1" rows="20"
                id="i">
console.log("Welcome to Code Runner")
</textarea>
</div>
            <div class="Html"><textarea class="form-control" id = "HtmlCode" id="exampleFormControlTextarea1" rows="20"
                id="i">
<!-- Template start -->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/jquery-3.1.1.js"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<link rel="stylesheet" type="text/css" href="./style.css">
	<script src="./script.js"></script>
	<title>My site</title>
</head>
<style></style>
<body>
	<h1>Hello World</h1>
</body>
<script></script>
</html>
<!-- Template end -->
</textarea></div>
     <button class = "btn btn-primary run my-3">Run code</button>
     <!-- Button trigger modal -->
<button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Download code
</button>
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Download source code</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
       Download your code by clicking below:
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary d-html">Html</button>
        <button type="button" class="btn btn-danger d-css">Css</button>
        <button type="button" class="btn btn-warning d-js">JavaScript</button>
      	<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
     </div> 
     </div> 
     </div>     
 <button  id = "back" class="btn btn-danger" style = "position:fixed;right: 10px;bottom: 10px;">Go back to code</button> 
     <div class="code">
     	
     </div>
</body>
<script>
	$(".Css").hide()
	$(".Js").hide()
	// $(".Html").hide()
	$("#a").addClass("disabled")
	$("title").text("CodeRunner")
	$("#back").hide();
	$(".code").hide();
	$("#back").addClass("disabled");
	$(".d-html").click(function(){
		   let t = $(".code title").text();	
		   var textToSave = $("#HtmlCode").val();
   		   var hiddenElement = document. createElement('a');
   		   hiddenElement. href = 'data:attachment/text,' + encodeURI(textToSave);
   		   hiddenElement. target = '_blank';
   		   hiddenElement. download = `index.html`;
   		   hiddenElement. click();
	})
		$(".d-css").click(function(){
			let t = $(".code title").text();	
		   var textToSave = $("#CSSCODE").val();
   		   var hiddenElement = document. createElement('a');
   		   hiddenElement. href = 'data:attachment/text,' + encodeURI(textToSave);
   		   hiddenElement. target = '_blank';
   		   hiddenElement. download = `style.css`;
   		   hiddenElement. click();
	})
		$(".d-js").click(function(){
			let t = $(".code title").text();	
		   var textToSave = $("#JSCODE").val();
   		   var hiddenElement = document. createElement('a');
   		   hiddenElement. href = 'data:attachment/text,' + encodeURI(textToSave);
   		   hiddenElement. target = '_blank';
   		   hiddenElement. download = `script.js`;
   		   hiddenElement. click();
	})	
	//CSS SWITCHER
	$(".css").click(function(){
	$("#b").addClass("disabled")
	$("#a").removeClass("disabled")
	$("#c").removeClass("disabled")
	$(".Css").show()
	$(".Js").hide()
	$(".Html").hide()
	})
	//JS SWITCHER
	$(".js").click(function(){
	$("#c").addClass("disabled")
	$("#a").removeClass("disabled")
	$("#b").removeClass("disabled")
	$(".Js").show()
	$(".Css").hide()
	$(".Html").hide()
	})
	//HTML SWITCHER
	$(".html").click(function(){
	$("#a").addClass("disabled")
	$("#b").removeClass("disabled")
	$("#c").removeClass("disabled")
	$(".Html").show()
	$(".Js").hide()
	$(".Css").hide()
	})
	$(".run").click(function(){
		let css = $("#CSSCODE").val()
		let js = $("#JSCODE").val()
		let value = $("#HtmlCode").val();
		$("#back").show();
		$(".vanish").hide();
		$(".code").show();
		$(".code").append(value)
		$("#back").removeClass("disabled");
		let t = $(".code title").text();
		$("title").text(t);
		$(".code style").text(css);
		var script=document.createElement('script');
		script.type='text/javascript';
		script.innerHTML = `${js}`;
		$(".code").append(script);
		//Back to light mode
		$("body").css({ "background-color": "white", "color": "black" });
        $("#mode").text("Enable dark mode");
        $("#mode").removeClass("btn btn-light");
        $("#mode").addClass("btn btn-dark");
        $("nav").removeClass("navbar navbar-expand-lg navbar-dark bg-dark");
        $("nav").addClass("navbar navbar-expand-lg navbar-light bg-light");
        $("textarea").css({ "background-color": "white", "color": "black" });

	});
	$("#back").click(function(){
		console.clear();
		$("#back").hide();
		$(".code").hide();
		$(".code").empty()
		$(".vanish").show();
		$("#back").addClass("disabled");
		$("title").text("CodeRunner");
	});

	//MODES
	  $("#mode").click(function () {
        let a = $("body").css("background-color");
        let white = "rgb(255, 255, 255)";
        if (a == white) {
            $("body").css({ "background-color": "black", "color": "white" });
            $("#mode").text("Enable light mode");
            $("#mode").removeClass("btn btn-dark");
            $("#mode").addClass("btn btn-light");
            $("nav").removeClass("navbar navbar-expand-lg navbar-light bg-light");
            $("nav").addClass("navbar navbar-expand-lg navbar-dark bg-dark");
            $("textarea").css({ "background-color": "black", "color": "white" });
        }
        else {
            $("body").css({ "background-color": "white", "color": "black" });
            $("#mode").text("Enable dark mode");
            $("#mode").removeClass("btn btn-light");
            $("#mode").addClass("btn btn-dark");
            $("nav").removeClass("navbar navbar-expand-lg navbar-dark bg-dark");
            $("nav").addClass("navbar navbar-expand-lg navbar-light bg-light");
            $("textarea").css({ "background-color": "white", "color": "black" });
        }

    })

</script>
</html>
